#开发SOP要求
0.开发过程，对于用户提出的问题，你必须用中文进行回答。
1.对于用户提出的模糊要求，你必须从产品可行性、交互操作等方面先引导用户说清楚更具体的需求，然后形成需求PRD文档。
2.在用户确认需求PRD文档后，你必须先用markdown语言去设计大概的UI轮廓样式，让用户去确认。
3.用户确认大概得UI轮廓样式符合要求，你必须再用html设计一个逼真的移动端的UI页面，UI页面要穷尽每种点击操作能达到的效果，也就是说，你的UI界面必须是多个。
4.你必须等用户确认移动端UI样式符合预期后，再进入开发
5.进入开发时，你必须考虑文件之间的协同和联动，不要把所有内容都装到一个html文件中，这样会使得html文件过于庞大，后续不易修改。比如你可以灵活搭配使用js、css等文件，但你全程必须展站在移动端能否正常显示和运行的角度去开发。
6.每开发完一个页面，你必须对当前页面的进行点击测试，而且一定要以手机端浏览器能正常运行为主。当该页面能正常点击后，你再进入下一个页面开发。
7.在每次测试过程中，你必须用playwright mcp认真检查，尤其要注意有没有代码错误。
8.测试过程中，可能会生成大量测试文件，对于这些测试文件，你必须按时间戳单独建立文件夹，把测试文件放在单独文件夹中，不允许直接把测试放在项目主文件夹中。
9.开发完成后，用户会进行测试，对于用户提出的每条修改要求，你都必须一一检查落实，不允许只修改其中一条 就匆匆忙忙认为完成了所有的修改。


## 项目概述

一款结合飞机射击与英语单词学习的教育类游戏，通过射击携带字母的敌机来拼写目标单词，寓教于乐。

### 核心特性
- 🎯 **单词拼写挑战**：按顺序射击字母拼写目标单词
- 📚 **分级学习系统**：支持小学1-6年级难度调节
- 🚀 **武器升级系统**：基础→双发→三发→激光武器
- 🎵 **语音播放功能**：支持英文单词和中文释义播放
- 📱 **移动端适配**：响应式设计，支持触屏操作
- 💾 **本地数据存储**：保存游戏设置和最高分记录

## 技术架构

### 前端技术栈
- **HTML5 Canvas**: 游戏渲染引擎
- **ES6+ JavaScript**: 游戏核心逻辑
- **CSS3**: 现代响应式UI界面
- **Web Speech API**: 语音播放功能
- **Local Storage**: 数据持久化

### 游戏系统架构

```
GameEngine (主引擎)
├── GameState (状态管理)
├── WordManager (单词系统)
├── GameRenderer (渲染系统)
├── Player (玩家飞机)
├── Enemy (敌机系统)
├── Bullet (子弹物理)
├── CollisionSystem (碰撞检测)
├── UIController (界面控制)
└── SoundManager (音效系统)
```

## 核心功能实现

### 1. 游戏引擎系统
- **Player类**: 玩家飞机控制（移动、射击、武器升级）
- **Enemy类**: 敌机生成和多种运动轨迹（直线、Z字形、波浪、螺旋）
- **Bullet类**: 子弹物理系统（基础弹、激光）
- **CollisionSystem**: 高效AABB碰撞检测算法
- **GameEngine**: 60fps游戏主循环和渲染管道

### 2. 单词学习系统
- **单词数据库**: 100+个小学英语单词，按年级和类别分组
- **难度筛选**: 根据年级自动调整单词难度
- **目标字母生成**: 智能生成目标字母和干扰字母
- **学习进度跟踪**: 统计正确率、连击数、学习单词数
- **语音播放**: Web Speech API集成，支持双语发音

### 3. 武器升级系统
```javascript
// 武器升级路径
basic → double → triple → laser
  ↓       ↓       ↓       ↓
单发弹  → 双发弹 → 三发弹 → 激光束
```

### 4. 渲染优化
- **星空背景**: 动态星场粒子系统
- **粒子特效**: 爆炸、得分、文字飞行效果
- **高分辨率适配**: DPR自适应，支持Retina屏幕
- **性能监控**: FPS实时监控，低帧率预警

## 游戏玩法

### 基本操作
- **移动**: 方向键/WASD移动飞机
- **射击**: 空格键/回车键发射子弹
- **暂停**: P键暂停/继续游戏

### 游戏目标
1. 观察右侧面板显示的目标单词
2. 按顺序射击携带正确字母的红色敌机
3. 避免射击干扰字母（灰色敌机）
4. 完成单词拼写获得分数和奖励
5. 每完成5个单词武器升级一次

### 评分系统
- **目标字母**: +50分（含连击加成）
- **干扰字母**: +10分
- **单词完成**: +200分 + 字母数×10分
- **连击加成**: 每次连击+10%分数加成

## 单词数据库

### 1-3年级（基础词汇）
```javascript
基础问候: HELLO, BYE, YES, NO
颜色系列: RED, BLUE, GREEN, YELLOW  
动物系列: CAT, DOG, FISH, BIRD
数字系列: ONE, TWO, THREE, FOUR, FIVE
家庭称呼: MOM, DAD, BOY, GIRL
```

### 4-6年级（进阶词汇）
```javascript
人物关系: FRIEND, TEACHER, STUDENT, FAMILY
食物饮品: BREAKFAST, LUNCH, DINNER, APPLE, BANANA
星期时间: MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY
季节天气: SPRING, SUMMER, AUTUMN, WINTER, SUNNY, RAINY
科技用品: COMPUTER, PHONE, CAMERA, TELEVISION
```

## 性能优化

### 渲染优化
- 对象池模式管理子弹和敌机
- 离屏对象自动清理机制
- 粒子系统生命周期管理
- Canvas 2D硬件加速优化

### 内存管理
- 及时清理销毁的游戏对象
- 音频上下文复用
- 事件监听器生命周期管理
- 本地存储数据压缩

### 移动端优化
- 触摸事件优化，防止滚动穿透
- 虚拟控制器自适应布局
- 电池续航优化（降低非必要计算）
- 网络环境适配（语音播放降级）

## 手机端H5设计要求

### UI设计原则
基于贪吃蛇手机端H5成功经验，采用以下设计原则：

#### 1. **透明悬浮按钮系统**
- **游戏区最大化**：游戏画布占满整个屏幕，提供最佳沉浸感
- **透明控制按钮**：所有操作按钮采用半透明悬浮设计
  - 方向控制：左下角透明虚拟摇杆
  - 射击按钮：右下角透明射击按钮
  - 暂停按钮：右上角小型透明按钮
  - 设置按钮：左上角小型透明按钮
- **不遮挡游戏内容**：透明度设置为30-50%，确保不影响游戏视觉

#### 2. **屏幕布局策略**
```
┌─[设置]──────────────[暂停]─┐
│                          │
│      游戏画布区域            │
│     （全屏显示）            │  
│                          │
│                          │
│  [虚拟摇杆]        [射击]   │
└─────────────────────────┘
```

#### 3. **触控交互优化**
- **最小触控区域**：按钮最小44px×44px，确保准确点击
- **手势操作**：
  - 摇杆区域：滑动控制飞机移动
  - 射击按钮：点击发射，长按连发
  - 双击屏幕：紧急暂停功能
- **触觉反馈**：击中目标时震动反馈

#### 4. **视觉设计规范**
- **按钮样式**：圆角半透明，带微妙发光边框
- **颜色方案**：
  - 控制按钮：rgba(255,255,255,0.4) 白色半透明
  - 危险操作：rgba(255,100,100,0.4) 红色半透明
  - 确认操作：rgba(100,255,100,0.4) 绿色半透明
- **字体大小**：最小16px，确保手机端可读性

#### 5. **信息显示优化**
- **状态信息**：顶部固定显示区域
  - 分数、生命值、目标单词
  - 背景半透明，文字高对比度
- **提示信息**：屏幕中央临时显示
  - 单词完成提示、升级提示
  - 自动消失，不影响操作

#### 6. **性能和兼容性**
- **移动端优化**：
  - Canvas自适应分辨率
  - 触摸事件防抖和节流
  - 内存使用控制在30MB以内
- **兼容性支持**：
  - iOS Safari 12+
  - Android Chrome 70+
  - 微信内置浏览器
  - 各大手机厂商浏览器

### 实现要点
1. **position: fixed** 定位悬浮按钮
2. **z-index** 层级管理，确保按钮在最上层
3. **pointer-events** 控制点击穿透
4. **touch-action** 优化触摸行为
5. **viewport** 标签禁用缩放，固定布局

## 部署说明

### 文件结构
```
planewordsgame/
├── index.html          # 主游戏文件
├── CLAUDE.md          # 项目文档
└── README.md          # 用户说明（如需要）
```

### 运行要求
- 现代浏览器（Chrome 60+, Firefox 60+, Safari 12+）
- JavaScript启用
- Canvas 2D支持
- Web Speech API支持（可选，用于语音播放）
- 本地存储支持（可选，用于数据持久化）

### 部署方式
1. **本地运行**: 直接打开index.html文件
2. **Web服务器**: 上传到任意Web服务器
3. **静态托管**: 部署到Netlify/Vercel/GitHub Pages

## 开发日志

### v1.0.0 (2025-01-15)
- ✅ 完成核心游戏引擎架构
- ✅ 实现单词学习系统（100+单词）
- ✅ 集成Web Speech API语音播放
- ✅ 武器升级系统（4级武器）
- ✅ 移动端自适应界面
- ✅ 本地存储和设置管理
- ✅ 性能优化和碰撞检测
- ✅ 粒子特效和音效系统

### 技术亮点
1. **高性能游戏循环**: 60fps稳定帧率，支持动态降级
2. **智能单词生成**: 根据难度自动筛选和排列字母
3. **多轨迹敌机AI**: 4种不同运动模式增加游戏趣味性
4. **无缝语音集成**: 支持英文和中文双语播放
5. **响应式游戏UI**: 完美适配桌面和移动设备

### 未来扩展可能
- [ ] 更多年级单词库扩展
- [ ] 多人对战模式
- [ ] 成就系统和排行榜
- [ ] 更多武器类型和技能
- [ ] 关卡设计和Boss战
- [ ] 云存档功能

## 技术支持

如需技术支持或功能建议，请通过以下方式联系：
- 游戏内置调试: 使用 `window.game` 对象进行调试
- 浏览器控制台: 查看详细的游戏运行日志
- 性能监控: 游戏右上角显示实时FPS

---

**开发者**: Claude AI Assistant  
**开发时间**: 2025年1月15日  
**项目类型**: 教育游戏  
**技术栈**: HTML5 + ES6 + Canvas 2D  
**许可证**: MIT License